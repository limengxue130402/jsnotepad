var $menubar=function(){var c,a=$('<div class="menubar"></div>'),d=[],r=-1;function t(){!function(){for(var l=$("<ul class='menuTitle'></ul>"),e=0;e<c.length;e++)!function(e){var t=$("<li class='title'></li>");t.html(c[e].title),t.attr("dataId",e),l.append(t),t.click(function(){var e=Number(t.attr("dataId"));r=(-1===r?d[e].css("display","inline-block"):r!==e?(d[r].css("display","none"),d[e].css("display","inline-block")):d[r].css("display","none"),e)}),t.hover(function(){if(-1!==r){var e=Number(t.attr("dataId"));d[r].css("display","none"),d[e].css("display","inline-block"),r=e}})}(e);a.append(l)}(),function(){for(var e=0;e<c.length;e++){for(var t=$("<ul class='menus'></ul>"),l=c[e].menuItems,n=0;n<l.length;n++)if("hr"!==l[n].title){var i=$("<li class='item'></li>");if(i.html(l[n].title),i.attr("dataX",e),i.attr("dataY",n),""!==l[n].shortcut){var o=$("<span class='shortcut'></span>");o.html(l[n].shortcut),i.append(o)}l[n].enabled||i.addClass("disabled"),t.append(i),i.click(function(){if(!$(this).hasClass("disabled")){var e=Number($(this).attr("dataX")),t=Number($(this).attr("dataY"));d[e].css("display","none"),r=-1,c[e].menuItems[t].handler()}})}else{var s=$("<li class='menuHr'></li>");t.append(s)}t.css({width:c[e].width,left:c[e].left,display:"none"}),a.append(t),d.push(t)}}(),$("body").append(a)}return{show:function(e){c=e,t(),console.log(c),console.log(c[1].menuItems[1].title)},hideMenu:function(){-1!=r&&(d[r].css("display","none"),r=-1)}}}(),$editor=function(){var e=$("<div class='textArea'><textarea id='text' contenteditable='true' spellcheck='false'></textarea></div>"),t=e.find("textarea");return console.log("编辑"),{showText:function(){$("body").append(e),t.trigger("focus")}}}();function comList(){var i,l=$('<div class="notepad-com-list"><input class="editor" type="text"><br><ul class="list"></ul></div>'),n=l.find(".editor"),o=l.find(".list"),s={container:"",list:[],select:0,width:"200px",isFont:!1,isFontStyle:!1,selectHandler:null};function t(){var e,t=$(s.container).find(".notepad-com-list");0!==t.length&&t.remove(),$(s.container).append(l),l.css({width:s.width}),function(){var e,t,l;if(s.isFont)for(var n=0;n<s.list.length;n++)(e=$("<li class='item'></li>")).css("font-family",s.list[n]),o.append(e.html(s.list[n]));else if(s.isFontStyle)for(n=0;n<s.list.length;n++)e=$('<li class="item"></li>'),t=e,"斜体"!==(l=s.list[n])?"粗体"!==l?"粗偏斜体"!==l||t.css({"font-weight":"bold","font-style":"italic"}):t.css("font-weight","bold"):t.css("font-style","italic"),o.append(e.html(s.list[n]));else for(n=0;n<s.list.length;n++)e=$('<li class="item"></li>'),o.append(e.html(s.list[n]));i=o.find(".item")}(),e=s.select,$(i[e]).addClass("selected"),n.val(s.list[e]),n.select()}this.show=function(e){$.extend(s,e),t(),o.click(function(e){$(i[s.select]).removeClass("selected"),s.select=s.list.indexOf($(e.target).html()),$(i[s.select]).addClass("selected"),n.val(s.list[s.select]),n.select(),s.selectHandler(s.select)}),n.keyup(function(){var e=0;for(e=0;e<s.list.length&&0!==s.list[e].indexOf(n.val());e++);e!==s.list.length&&(i[e].scrollIntoView({behavior:"smooth",block:"start"}),$(i[s.select]).removeClass("selected"),$(i[e]).addClass("selected"),s.select=e)})}}var $dlgFont=function(){var i=$('<div class="notepad-dlg-mask notepad-dlg-font"><div class="dialogbox notepad-dlgbox"><div class="notepad-dlg-titlebar"><p class="title">字体</p><span class="close-btn" title="关闭">✖</span></div><div class="main notepad-dlg-main"><div class="font-family"><p>字体(F):</p></div><div class="font-style"><p>字形(Y):</p></div><div class="font-size"><p>大小(S):</p></div><fieldset class="sample"><legend>示例</legend><p class="sample-txt">AaBbYyZz</p></fieldset><div class="script"><label>脚本(R):<br><select><option value="西欧语言">西欧语言</option><option value="中文 GB2312">中文 GB2312</option></select></label></div><input class="btn-ok btn" type="button" value="确定"><input class="btn-cancel btn" type="button" value="取消"></div></div></div>'),o=i.find(".btn-ok"),s=i.find(".close-btn"),c=i.find(".btn-cancel"),e=i.find(".sample-txt"),a=["Agency FB","Algerian","Arial","Arial Rounded MT","Axure Handwriting","Bahnschrift","Baskerville Old Face","Bauhaus 93","Bell MT","Berlin Sans FB","Bernard MT","BlackAdder ITC"],d=["常规","斜体","粗体","粗偏斜体"],r=["8","9","10","11","12","14","16","18","20","22","24","26","28","36","48","72"],u={family:"Arial",style:"常规",size:"16",okHandler:null};function f(){console.log(u.family),e.css({"font-family":u.family,"font-size":u.size+"px","font-style":""}),"斜体"!==u.style?"粗体"!==u.style?"粗偏斜体"!==u.style||e.css({"font-weight":"bold","font-style":"italic"}):e.css("font-weight","bold"):e.css("font-style","italic")}function h(){i.remove()}return{show:function(e){var t,l,n;console.log(u),$.extend(u,e),$("body").append(i),t=new comList,l=new comList,n=new comList,console.log(n.show.container),t.show({container:".notepad-dlg-font .font-family",width:"176px",list:a,select:a.indexOf(u.family),isFont:!0,selectHandler:function(e){u.family=a[e],console.log(e+"123456"),f()}}),l.show({container:".notepad-dlg-font .font-style",width:"132px",list:d,select:d.indexOf(u.style),isFontStyle:!0,selectHandler:function(e){u.style=d[e],f()}}),n.show({container:".notepad-dlg-font .font-size",width:"64px",list:r,select:r.indexOf(u.size),selectHandler:function(e){u.size=r[e],f()}}),f(),s.click(h),c.click(h),o.click(function(){u.okHandler({family:u.family,style:u.style,size:u.size}),h()})}}}(),np={config:{appContainer:".notepad"},fontFamily:"Arial",fontStyle:"常规",fontSize:"16px",fontHandler:function(e){np.fontFamily=e.family,np.fontStyle=e.style,np.fontSize=e.size,console.log(e.family)}};$(function(){$menubar.show(np.menuData),$editor.showText(),$(".notepad-editor").click(function(){$menuBar.hideMenu()})}),np.menuData=[{title:"文件(F)",menuItems:[{title:"新建(N)",shortcut:"Ctrl+N",enabled:!0,handler:function(){console.log("新建(N) menu clicked!")}},{title:"打开(O)...",shortcut:"Ctrl+O",enabled:!0,handler:function(){console.log("打开(O) menu clicked!")}},{title:"保存(S)",shortcut:"Ctrl+S",enabled:!0,handler:function(){console.log("保存(S) menu clicked!")}},{title:"另存为(A)...",shortcut:"",enabled:!0,handler:function(){console.log("另存为(A) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"页面设置(U)...",shortcut:"",enabled:!0,handler:function(){console.log("页面设置(U) menu clicked!")}},{title:"打印(P)...",shortcut:"Ctrl+P",enabled:!0,handler:function(){console.log("打印(P) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"退出(X)",shortcut:"",enabled:!0,handler:function(){console.log("退出(X) menu clicked!")}}],width:"202px",left:"0px"},{title:"编辑(E)",menuItems:[{title:"撤销(U)",shortcut:"Ctrl+Z",enabled:!1,handler:function(){console.log("撤销(U) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"剪切(T)",shortcut:"Ctrl+X",enabled:!1,handler:function(){console.log("剪切(X) menu clicked!")}},{title:"复制(C)",shortcut:"Ctrl+C",enabled:!1,handler:function(){console.log("复制(C) menu clicked!")}},{title:"粘贴(P)",shortcut:"Ctrl+V",enabled:!1,handler:function(){console.log("粘贴(V) menu clicked!")}},{title:"删除(L)",shortcut:"Del",enabled:!1,handler:function(){console.log("删除(L) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"使用 Bing 搜索...",shortcut:"Ctrl+E",enabled:!0,handler:function(){console.log("使用 Bing 搜索 menu clicked!")}},{title:"查找(F)...",shortcut:"Ctrl+F",enabled:!1,handler:function(){console.log("查找(F) menu clicked!")}},{title:"查找下一个(N)",shortcut:"F3",enabled:!1,handler:function(){console.log("查找下一个(N) menu clicked!")}},{title:"替换(R)...",shortcut:"Ctrl+H",enabled:!0,handler:function(){console.log("替换(R) menu clicked!")}},{title:"转到(G)...",shortcut:"Ctrl+G",enabled:!0,handler:function(){console.log("转到(G) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"全选(A)",shortcut:"Ctrl+A",enabled:!0,handler:function(){console.log("全选(A) menu clicked!")}},{title:"时间/日期(D)",shortcut:"F5",enabled:!0,handler:function(){console.log("时间/日期(D) menu clicked!")}}],width:"218px",left:"52px"},{title:"格式(O)",menuItems:[{title:"自动换行(W)",shortcut:"",enabled:!0,handler:function(){console.log("自动换行(W) menu clicked!")}},{title:"字体(F)...",shortcut:"",enabled:!0,handler:function(){$dlgFont.show({family:np.fontFamily,style:np.fontStype,size:np.fontSize,okHandler:np.fontHandler})}}],width:"156px",left:"106px"},{title:"查看(V)",menuItems:[{title:"状态栏(S)",shortcut:"",enabled:!0,handler:function(){console.log("状态栏(S) menu clicked!")}}],width:"138px",left:"162px"},{title:"帮助(H)",menuItems:[{title:"查看帮助(H)",shortcut:"",enabled:!0,handler:function(){console.log("查看帮助(H) menu clicked!")}},{title:"关于记事本(A)",shortcut:"",enabled:!0,handler:function(){console.log("关于记事本(A) menu clicked!")}}],width:"166px",left:"216px"}];